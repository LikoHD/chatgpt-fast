---
import Layout from "~/layouts/Layout.astro"
import Header from "~/components/Header.astro"
import Generator from "~/components/Generator"
import "~/styles/global.css"
import "@unocss/reset/tailwind.css"
import "katex/dist/katex.min.css"
import "highlight.js/styles/atom-one-dark.css"
import { parsePrompts } from "~/utils/parse"
import { onMount } from "solid-js"
import { createEffect } from "solid-js"


import { Analytics } from "@vercel/analytics/react"
import AstroReact from "astro/components"

const prompts = await parsePrompts()
---

<Layout title="ChatGPT">
  <main class="before">
    <Header />
    <Generator prompts={prompts} client:visible />
  </main>
</Layout>
      
    
<script>
  onMount(() => {
    if (import.meta.env.CLIENT) {
      import("@vercel/analytics")
        .then((module) => {
          const { inject } = module;
          inject();
        })
        .catch((error) => console.error("Failed to load Vercel Analytics:", error));
    }
  });
</script>

      
      
      
      
<MyApp>
  <script>
    onMount(() => {
      if (import.meta.env.CLIENT) {
        import("@vercel/analytics/react")
          .then((module) => {
            const { Analytics } = module;
            createEffect(() => {
              return <AstroReact component={Analytics} />;
            });
          })
          .catch((error) => console.error("Failed to load Vercel Analytics:", error));
      }
    });
  </script>
  
  <slot />
</MyApp>
